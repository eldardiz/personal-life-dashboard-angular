<!-- HERO SEKCIJA -->
<article class="intro-article">
  <div class="intro-text">
    <h1>Student Fun Zone â€“ Visual Board</h1>
    <p>
      Visual Board ti sluÅ¾i kao mala "inspo" ploÄa, moÅ¾eÅ¡ dodavati post-it
      biljeÅ¡ke, slike ili kratke citate i slagati ih kako Å¾eliÅ¡.
    </p>
    <p>
      Sve Å¡to dodaÅ¡ moÅ¾eÅ¡ pomjerati miÅ¡em, obrisati pin, i vratiti ga iz
      "recent" sekcije. PloÄa se automatski pamti u browseru.
    </p>
  </div>
  <div class="intro-media">
    <img
      src="assets/images/visual-board-hero.jpg"
      alt="Visual board za studente"
    />
  </div>
</article>

<!-- VISION BOARD SEKCIJA -->
<section class="vision-section">
  <div class="vision-card">
    <div class="vision-toolbar">
      <button (click)="addNote()" type="button">+ Post-it</button>
      <button (click)="addImage()" type="button">+ Slika</button>
      <button (click)="addQuote()" type="button">+ Citat</button>
      <button (click)="saveBoard()" type="button">Snimi</button>
      <button (click)="clearBoard()" type="button">OÄisti ploÄu</button>
      <button (click)="exportPdf()" type="button">Snimi kao PDF</button>
      <button (click)="openMailPopup()" type="button">PoÅ¡alji mailom</button>
    </div>

    <!-- VISION BOARD -->
    <div #boardElement class="vision-board" aria-label="Visual board zona">
      <div
        *ngFor="let item of boardItems; let i = index"
        [class]="item.className"
        [style.left.px]="item.left"
        [style.top.px]="item.top"
        [attr.contenteditable]="item.type !== 'image'"
        (mousedown)="startDrag($event, i)"
        [innerHTML]="item.html | safeHtml"
      >
        <button
          class="delete-btn"
          (click)="removeItem(i, $event)"
          type="button"
        >
          ğŸ“Œ
        </button>
      </div>
    </div>

    <!-- RECENT TRAY -->
    <div class="recent-tray">
      <div class="recent-header">
        <h3>Posljednje skinuto (max 3)</h3>
        <button (click)="clearRecent()" class="restore-btn" type="button">
          OÄisti skinute
        </button>
      </div>
      <div class="recent-items">
        <div *ngIf="recentRemoved.length === 0">
          <em>Nema skinutih elemenata.</em>
        </div>
        <div
          *ngFor="let item of recentRemoved; let i = index"
          class="recent-item"
        >
          <div *ngIf="item.type === 'image'">
            <img [src]="extractImageSrc(item.html)" alt="Recent image" />
          </div>
          <div *ngIf="item.type !== 'image'">
            {{ getItemPreview(item) }}
          </div>
          <button (click)="restoreRecent(i)" class="restore-btn" type="button">
            Vrati
          </button>
        </div>
      </div>
    </div>

    <p class="vision-back-link">
      <a routerLink="/module-selector">â† Povratak na Student Fun Zone</a>
    </p>
  </div>
</section>

<!-- MAIL POPUP -->
<div
  class="modal-overlay"
  [class.visible]="showMailPopup"
  role="dialog"
  aria-modal="true"
  aria-labelledby="mailPopupTitle"
>
  <div class="modal-card">
    <button
      class="modal-close-btn"
      type="button"
      aria-label="Zatvori"
      (click)="closeMailPopup()"
    >
      Ã—
    </button>
    <h2 id="mailPopupTitle">PoÅ¡alji Visual Board mailom</h2>
    <p>Unesi email na koji Å¾eliÅ¡ poslati sadrÅ¾aj.</p>

    <div class="form-group">
      <label for="recipientEmail">Email</label>
      <input
        type="email"
        [(ngModel)]="recipientEmail"
        [style.borderColor]="emailError ? '#dc2626' : '#d1d5db'"
        placeholder="primjer@email.com"
      />
      <p class="error-message" *ngIf="emailError">Unesi ispravan email.</p>
    </div>

    <div class="modal-actions">
      <button type="button" (click)="sendEmail()">PoÅ¡alji</button>
      <button type="button" (click)="closeMailPopup()">PoniÅ¡ti</button>
    </div>
  </div>
</div>
