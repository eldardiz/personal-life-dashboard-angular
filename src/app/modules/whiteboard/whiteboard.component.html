<!-- HERO SEKCIJA -->
<article class="intro-article">
  <div class="intro-text">
    <h1>Student Fun Zone – Interaktivni Whiteboard</h1>
    <p>
      Ovo je digitalna ploča za skiciranje ideja, planova ili zadataka. Možeš
      crtati mišem ili prstom, mijenjati boju i debljinu četke, koristiti gumicu
      i sačuvati svoj crtež.
    </p>
    <p>
      Whiteboard je idealan za brze brainstorm sesije ili objašnjavanje
      koncepata tokom vježbi.
    </p>
  </div>
  <div class="intro-media">
    <img
      src="assets/images/whiteboard.jpg"
      alt="Digitalni whiteboard za studente"
    />
  </div>
</article>

<!-- WHITEBOARD SEKCIJA -->
<section class="whiteboard-section">
  <div class="whiteboard-card">
    <div class="whiteboard-toolbar">
      <div class="control-group">
        <label for="colorPicker">Boja</label>
        <input
          type="color"
          [(ngModel)]="currentColor"
          (change)="onColorChange()"
          id="colorPicker"
        />
      </div>

      <div class="control-group">
        <label for="brushSize">Četka</label>
        <input
          type="range"
          [(ngModel)]="brushSize"
          min="1"
          max="20"
          id="brushSize"
        />
      </div>

      <div class="toolbar-actions">
        <button (click)="toggleEraser()" type="button">
          {{ isErasing ? "Crtaj" : "Briši" }}
        </button>
        <button (click)="clearCanvas()" type="button">Čista ploča</button>
        <button (click)="saveImage()" type="button">Snimi sliku</button>
        <button (click)="exportPdf()" type="button">Snimi kao PDF</button>
        <button (click)="openMailPopup()" type="button">Pošalji mailom</button>
      </div>
    </div>

    <div class="whiteboard-canvas-wrap" id="printArea">
      <canvas
        #canvas
        width="1000"
        height="520"
        (mousedown)="startDraw($event)"
        (mouseup)="endDraw()"
        (mousemove)="draw($event)"
        (touchstart)="startDraw($event)"
        (touchmove)="draw($event); $event.preventDefault()"
        (touchend)="endDraw()"
      >
      </canvas>
    </div>

    <p class="whiteboard-back-link">
      <a routerLink="/module-selector">← Povratak na Student Fun Zone</a>
    </p>
  </div>
</section>

<!-- MAIL POPUP -->
<div
  class="modal-overlay"
  [class.visible]="showMailPopup"
  role="dialog"
  aria-modal="true"
  aria-labelledby="mailPopupTitle"
>
  <div class="modal-card">
    <button
      class="modal-close-btn"
      type="button"
      aria-label="Zatvori"
      (click)="closeMailPopup()"
    >
      ×
    </button>
    <h2 id="mailPopupTitle">Pošalji whiteboard mailom</h2>
    <p>Unesi email na koji želiš poslati sadržaj.</p>

    <div class="form-group">
      <label for="recipientEmail">Email</label>
      <input
        type="email"
        [(ngModel)]="recipientEmail"
        [style.borderColor]="emailError ? '#dc2626' : '#d1d5db'"
        id="recipientEmail"
        placeholder="primjer@email.com"
      />
      <p class="error-message" *ngIf="emailError">Unesi ispravan email.</p>
    </div>

    <div class="modal-actions">
      <button type="button" (click)="sendEmail()">Pošalji</button>
      <button type="button" (click)="closeMailPopup()">Poništi</button>
    </div>
  </div>
</div>
